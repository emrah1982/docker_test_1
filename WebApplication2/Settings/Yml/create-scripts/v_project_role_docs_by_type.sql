-- --------------------------------------------------------
-- Host:                         127.0.0.1
-- Server version:               5.7.32-0ubuntu0.18.04.1 - (Ubuntu)
-- Server OS:                    Linux
-- HeidiSQL Version:             10.2.0.5599
-- --------------------------------------------------------

/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET NAMES utf8 */;
/*!50503 SET NAMES utf8mb4 */;
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;

-- Dumping structure for view vpcontract_dev.v_project_role_docs_by_type
-- Removing temporary table and create final VIEW structure
DROP TABLE IF EXISTS `v_project_role_docs_by_type`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `vpcontract_dev`.`v_project_role_docs_by_type` AS select `vpcontract_dev`.`project`.`Id` AS `Id`,`vpcontract_dev`.`project`.`CompanyCode` AS `CompanyCode`,`vpcontract_dev`.`project`.`FacilityCode` AS `FacilityCode`,`vpcontract_dev`.`project`.`ProjectCode` AS `ProjectCode`,`vpcontract_dev`.`project`.`UserCode` AS `UserCode`,`vpcontract_dev`.`project`.`ProjectName` AS `ProjectName`,`vpcontract_dev`.`project`.`ProjectDesc` AS `ProjectDesc`,`vpcontract_dev`.`project`.`DtStart` AS `DtStart`,`vpcontract_dev`.`project`.`DtEnd` AS `DtEnd`,`vpcontract_dev`.`project`.`Status` AS `Status`,`vpcontract_dev`.`project`.`ProjectOwner` AS `ProjectOwner`,`vpcontract_dev`.`project`.`InsertDateTime` AS `InsertDateTime`,`vpcontract_dev`.`project`.`InsertUser` AS `InsertUser`,`vpcontract_dev`.`project`.`UpdateDateTime` AS `UpdateDateTime`,`vpcontract_dev`.`project`.`UpdateUser` AS `UpdateUser`,`vpcontract_dev`.`project`.`Deleted` AS `Deleted`,`vpcontract_dev`.`rel_contractor_type_doc_type`.`ContractorTypeCode` AS `ContractorTypeCode`,`vpcontract_dev`.`contractor_type`.`ContractorTypeName` AS `ContractorTypeName`,`vpcontract_dev`.`project_def_types`.`PrjDefTypeCode` AS `PrjDefTypeCode`,`vpcontract_dev`.`project_def_types`.`PrjDefTypeName` AS `PrjDefTypeName`,`vpcontract_dev`.`contractor_asset_role`.`AssetRoleCode` AS `AssetRoleCode`,`vpcontract_dev`.`contractor_asset_role`.`AssetRoleName` AS `AssetRoleName`,`vpcontract_dev`.`contractor_asset_role`.`AssetRoleDesc` AS `AssetRoleDesc`,`vpcontract_dev`.`contractor_asset_role`.`IsCompanyRole` AS `IsCompanyRole`,`vpcontract_dev`.`contractor_asset_role`.`IsStaffRole` AS `IsStaffRole`,`vpcontract_dev`.`contractor_asset_role`.`IsVehicleRole` AS `IsVehicleRole`,`vpcontract_dev`.`contractor_asset_role`.`IsEquipmentRole` AS `IsEquipmentRole`,`vpcontract_dev`.`document_type`.`DocumentCode` AS `DocumentCode`,`vpcontract_dev`.`document_type`.`DocumentCategoryCode` AS `DocumentCategoryCode`,(case when `vpcontract_dev`.`document_type`.`IsCompanyDoc` then 'FİRMA' when `vpcontract_dev`.`document_type`.`IsStaffDoc` then 'ÇALIŞAN' when `vpcontract_dev`.`document_type`.`IsVehicleDoc` then 'ARAÇ' when `vpcontract_dev`.`document_type`.`IsEquipmentDoc` then 'EKİPMAN' end) AS `DocAssetType`,`vpcontract_dev`.`document_type`.`IsStaffDoc` AS `IsStaffDoc`,`vpcontract_dev`.`document_type`.`IsVehicleDoc` AS `IsVehicleDoc`,`vpcontract_dev`.`document_type`.`IsEquipmentDoc` AS `IsEquipmentDoc`,`vpcontract_dev`.`document_type`.`IsCompanyDoc` AS `IsCompanyDoc`,`vpcontract_dev`.`document_type`.`DocumentName` AS `DocumentName`,`vpcontract_dev`.`document_type`.`DocumentDesc` AS `DocumentDesc` from (((((((`vpcontract_dev`.`project` left join `vpcontract_dev`.`rel_project_def_types` on((`vpcontract_dev`.`project`.`ProjectCode` = `vpcontract_dev`.`rel_project_def_types`.`ProjectCode`))) left join `vpcontract_dev`.`project_def_types` on(((`vpcontract_dev`.`project_def_types`.`CompanyCode` = `vpcontract_dev`.`project`.`CompanyCode`) and (`vpcontract_dev`.`project_def_types`.`PrjDefTypeCode` = `vpcontract_dev`.`rel_project_def_types`.`PrjDefTypeCode`)))) left join `vpcontract_dev`.`rel_contractor_asset_role_project_type` on(((`vpcontract_dev`.`project_def_types`.`CompanyCode` = `vpcontract_dev`.`rel_contractor_asset_role_project_type`.`CompanyCode`) and (`vpcontract_dev`.`project_def_types`.`PrjDefTypeCode` = `vpcontract_dev`.`rel_contractor_asset_role_project_type`.`PrjDefTypeCode`)))) left join `vpcontract_dev`.`contractor_asset_role` on(((`vpcontract_dev`.`rel_contractor_asset_role_project_type`.`CompanyCode` = `vpcontract_dev`.`contractor_asset_role`.`CompanyCode`) and (`vpcontract_dev`.`rel_contractor_asset_role_project_type`.`RoleCode` = `vpcontract_dev`.`contractor_asset_role`.`AssetRoleCode`)))) left join `vpcontract_dev`.`rel_contractor_type_doc_type` on(((`vpcontract_dev`.`rel_contractor_type_doc_type`.`CompanyCode` = `vpcontract_dev`.`project_def_types`.`CompanyCode`) and (`vpcontract_dev`.`rel_contractor_type_doc_type`.`AssetRoleCode` = `vpcontract_dev`.`rel_contractor_asset_role_project_type`.`RoleCode`) and (`vpcontract_dev`.`rel_contractor_type_doc_type`.`AssetType` = 5)))) left join `vpcontract_dev`.`contractor_type` on(((`vpcontract_dev`.`rel_contractor_type_doc_type`.`CompanyCode` = `vpcontract_dev`.`contractor_type`.`CompanyCode`) and (`vpcontract_dev`.`contractor_type`.`ContractorTypeCode` = `vpcontract_dev`.`rel_contractor_type_doc_type`.`ContractorTypeCode`)))) left join `vpcontract_dev`.`document_type` on(((`vpcontract_dev`.`rel_contractor_type_doc_type`.`CompanyCode` = `vpcontract_dev`.`document_type`.`CompanyCode`) and (`vpcontract_dev`.`rel_contractor_type_doc_type`.`DocumentTypeCode` = `vpcontract_dev`.`document_type`.`DocumentCode`)))) where ((`vpcontract_dev`.`project`.`Deleted` = 0) and (`vpcontract_dev`.`rel_project_def_types`.`Deleted` = 0) and (`vpcontract_dev`.`project_def_types`.`Deleted` = 0) and (`vpcontract_dev`.`rel_contractor_asset_role_project_type`.`Deleted` = 0) and (`vpcontract_dev`.`contractor_asset_role`.`Deleted` = 0) and (`vpcontract_dev`.`rel_contractor_type_doc_type`.`Deleted` = 0) and (`vpcontract_dev`.`document_type`.`Deleted` = 0) and (`vpcontract_dev`.`contractor_type`.`Deleted` = 0));

/*!40101 SET SQL_MODE=IFNULL(@OLD_SQL_MODE, '') */;
/*!40014 SET FOREIGN_KEY_CHECKS=IF(@OLD_FOREIGN_KEY_CHECKS IS NULL, 1, @OLD_FOREIGN_KEY_CHECKS) */;
/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
